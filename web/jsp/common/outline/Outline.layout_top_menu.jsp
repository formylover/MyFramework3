<%@ page language="java" contentType="text/html;  charset=utf-8" pageEncoding="utf-8"%><%@ page	import="project.jun.dao.result.HoList"	import="project.jun.dao.result.HoMapList"%><!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"><%@include file="/jsp/common/include/include.jsp"%><html>	<head>		<meta http-equiv="Content-Type" content="text/html; charset=EUC-KR">		<title>#{PROJECT NAME}</title>		<style type="text/css">		p {		    margin:5px;		}		</style>		<link rel="stylesheet" type="text/css" href="<%= G_CONTEXTROOT %>/static/ext/extJs3.1/resources/css/ext-all.css" />				<script type="text/javascript" src="<%= G_CONTEXTROOT %>/static/ext/extJs3.1/ext-base-debug.js" ></script>		<script type="text/javascript" src="<%= G_CONTEXTROOT %>/static/ext/extJs3.1/ext-all-debug.js" ></script>		<script type="text/javascript" src="<%= G_CONTEXTROOT %>/static/ext/extJs3.1/ux/FeedPanel.js" ></script>		<script type="text/javascript" src="<%= G_CONTEXTROOT %>/static/ext/extJs3.1/ux/multidom.js" ></script>		<script type="text/javascript" src="<%= G_CONTEXTROOT %>/static/ext/extJs3.1/ux/mif.js" ></script>						<script>		var G_CONTEXTROOT = '<%=G_CONTEXTROOT%>';	    Ext.onReady(function(){	    		        // NOTE: This is an example showing simple state management. During development,	        // it is generally best to disable state management as dynamically-generated ids	        // can change across page loads, leading to unpredictable results.  The developer	        // should ensure that stable state ids are set for stateful components in real apps.			Ext.state.Manager.setProvider(new Ext.state.CookieProvider());	       var viewport = new Ext.Viewport({	            layout:'border',	            items:[	                new Ext.BoxComponent({ // raw	                    region:'north',	                    el: 'north',	                    height:80	                }), {		                id: 'id_iFrameMain',						region:'center',						xtype : 'iframepanel',						el : 'center',						margins:'0 5 5 5'					}	              ]	        });		    			var tb = new Ext.Toolbar();<%		HoList menuList = model.getHoList("listMenu");				HoMapList   mapList = menuList.toHoMapList("P_MENU_ID");			HoList	menu1 = mapList.getHoList("B");%>var menu = new Array();<% 		for ( int i=0 ; i<menu1.size() ; i++ ) {  %>			menu["<%= menu1.getString(i, "MENU_ID")%>"] = new Ext.menu.Menu({				<%= mapList.toNestedList(menu1.getString(i, "MENU_ID"), "menu", "fs_Click", new String[][]{{"text","MENU_NAME"},{"id","MENU_ID"},{"iconCls","ICON_CLS"},{"url","PGM_URL"}}) %>				});<% 		} %>			<% for ( int i=0 ; i<menu1.size() ; i++ ) {  %>					tb.add({id :'<%= menu1.getString(i, "MENU_ID")%>', 							text:'<%= menu1.getString(i, "MENU_NAME")%>',							menu : menu["<%= menu1.getString(i, "MENU_ID")%>"]});			<% 	} %>								tb.render('top_menu');	    });	    function fs_Click(item) {	       	// document.getElementById("id_iFrameMain").src = G_CONTEXTROOT + '/system/layout.do?p_action_flag=r_main_frame&link='+item.url+"&menu_id=" + item.id+"&menu_name=" + item.text ;	    	document.getElementById("id_iFrameMain").src = G_CONTEXTROOT + '/system/layout.do?p_action_flag=r_main_frame&link='+G_CONTEXTROOT + '/itinAdminWebApp/system/dataBase.do?p_action_flag=r_list';		}	    		</script>	</head>	<body>		<div id="north">			<div style="height:50px"></div>			<div id="top_menu"></div>		</div>		<div id="center"><iframe id="id_iFrameMain" src="" style="width:100%;height:100%;border:0px"></iframe></div>	</body></html><%!	String toNestedList(HoMapList mapList, String connect) {		StringBuffer sb = new StringBuffer();		List list = mapList.getList(connect);				sb.append("items : [");		for( int i=0 ; i<list.size();i++ ) { 			if( i>0 ) {				sb.append(", ");			}			sb.append("{");			sb.append("text : '").append( mapList.getString(connect, i, "MENU_NAME")).append("'\r\n");			sb.append(", iconCls : '").append( mapList.getString(connect, i, "ICON_CLS")).append("'\r\n");			sb.append(", url : '").append( mapList.getString(connect, i, "PGM_URL")).append("'\r\n");			sb.append(", handler : fs_Click\r\n");			if( mapList.size(mapList.getString(connect, i, "MENU_ID")) > 0 ) {				sb.append(", menu : {");				sb.append(toNestedList(mapList, mapList.getString(connect,i, "MENU_ID")));				sb.append(" } ");			}			sb.append("}");		}						sb.append("]");		return sb.toString();	}%>